-- Invoice setup for practice----
CREATE TABLE INVOICE_HEADER
(
INVOICE_DATE 		DATE 		NOT NULL,
INVOICE_TIME 		TIMESTAMP 	NOT NULL,
INVOICE_NO 		NUMBER 		GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
BILLING_ADDRESS 	VARCHAR2(100) 	NOT NULL,
SHIPPING_ADDRESS 	VARCHAR2(100) 	NOT NULL,
BUYER_GST 		CHAR(15) 	NOT NULL,
CONSIGNEE_PO_NO 	VARCHAR2(10) 	NOT NULL,
PO_DATE 		DATE 		NOT NULL,
MODE_OF_TRANSPORT 	VARCHAR2(20) 	NOT NULL,
HSN_CODE 		NUMBER(6) 	NOT NULL,
VEHICLE_NO 		CHAR(10) 	NOT NULL,
CGST_PERCENT 		NUMBER(2) 	NOT NULL,
SGST_PERCENT 		NUMBER(2) 	NOT NULL,
IGST_PERCENT 		NUMBER(2) 	NOT NULL,
SELLER_BANK 		VARCHAR2(20)	NOT NULL,
SELLER_BANK_BRANCH 	VARCHAR2(100) 	NOT NULL,
SELLER_BANK_IFSC_CODE 	VARCHAR2(20) 	NOT NULL,
TOTAL_INVOICE_VALUE 	NUMBER(20) 	NOT NULL
);

CREATE TABLE INVOICE_DETAILS
(
INVOICE_LINE_NO 	NUMBER 		GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
INVOICE_NO 		NUMBER 		NOT NULL,
PACKAGE_DESCRIPTION 	VARCHAR2(20) 	NOT NULL,
NO_OF_PACKAGES 		NUMBER(4) 	NOT NULL,
QUANTITY 		NUMBER(5) 	NOT NULL,
UNIT_OF_MEASUREMENT 	VARCHAR2(20) 	NOT NULL,
UNIT_PRICE 		NUMBER(6) 	NOT NULL,
TOTAL_TAXABLE_VALUE 	NUMBER(10) 	NOT NULL,
INVOICE_VALUE 		NUMBER(15) 	NOT NULL,
CONSTRAINT FK_INVOICE	FOREIGN KEY 	(INVOICE_NO)	REFERENCES INVOICE_HEADER(INVOICE_NO)
);

CREATE UNIQUE INDEX INV_DTL_INV_NO	ON INVOICE_DETAILS (INVOICE_NO);

---------- Online food order app DB - setups--------------------

CREATE TABLE CUSTOMERS
(
NAME 		VARCHAR2(30),
AGE 		NUMBER(3),
CONTACT_NUMBER 	NUMBER(10),
GENDER 		CHAR(1) 	NOT NULL,
CUSTOMER_ID 	INTEGER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
CONSTRAINT 	GENDER_CHECK 	CHECK (GENDER='M' OR GENDER='F' OR GENDER='U')
);

CREATE TABLE ADDRESS(
ADDRESS_ID 	INTEGER 	GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
CUSTOMER_ID 	INTEGER,
ADDRESS_LINE_1 	VARCHAR2(50),
ADDRESS_LINE_2 	VARCHAR2(50),
ADDRESS_LINE_3 	VARCHAR2(50),
CITY 		VARCHAR2(30),
STATE 		VARCHAR2(30),
PINCODE 	NUMBER(6),
COUNTRY 	VARCHAR2(20),
FOREIGN KEY 	(CUSTOMER_ID) REFERENCES CUSTOMERS(CUSTOMER_ID)
);

CREATE TABLE ORDERS
(
ORDER_ID 		INTEGER  	GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
CUSTOMER_ID 		INTEGER,
AMOUNT 			NUMBER(6,2),
ORDER_DATE_TIME 	TIMESTAMP NOT NULL,
DELIVERED_DATE_TIME 	TIMESTAMP,
FOREIGN KEY 		(CUSTOMER_ID) REFERENCES CUSTOMERS(CUSTOMER_ID)
);

-- Rollback scripts ---
DROP TABLE ORDERS;
DROP TABLE ADDRESS;
DROP TABLE CUSTOMERS;


